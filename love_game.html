<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å’Œå¥½å°éŠæˆ² ğŸ’</title>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<style>
  body {
    text-align: center;
    background-color: #ffe6f2;
    font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
    margin-top: 80px;
  }
  h1 { color: #ff6699; animation: floatText 3s ease-in-out infinite; }
  @keyframes floatText { 0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);} }
  .image-container { height:200px; margin-bottom:30px; position:relative; }
  .reaction-img { width:200px; display:none; margin:0 auto; border-radius:15px; opacity:0; transition:opacity 0.6s ease, transform 0.6s ease; }
  .show { display:block!important; opacity:1!important; transform:scale(1.05); }
  button { font-size:18px; padding:10px 25px; margin:10px; border:none; border-radius:12px; cursor:pointer; transition:all 0.3s ease; }
  #agreeBtn { background-color:#ff99cc; color:white; }
  #refuseBtn { background-color:#999; color:white; }
  .shake { animation:shake 0.3s ease-in-out; }
  @keyframes shake { 0%,100%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);} }
  .pulse { animation:pulse 0.6s ease-in-out; }
  @keyframes pulse { 0%{transform:scale(1);}50%{transform:scale(1.3);}100%{transform:scale(1);} }
  #log { margin-top:30px; font-size:14px; color:#555; }
</style>
</head>
<body>

<h1>æˆ‘å€‘å’Œå¥½å¥½å—ï¼ŸğŸ¥º</h1>

<div class="image-container">
  <img id="happyImg" class="reaction-img" src="image/sticker.png" alt="è¦ªè¦ª ğŸ’‹">
  <img id="angryImg" class="reaction-img" src="image/main.png" alt="ç”Ÿæ°£ ğŸ˜¤">
</div>

<button id="agreeBtn">å’Œå¥½ ğŸ’•</button>
<button id="refuseBtn">ä¸å’Œå¥½ ğŸ˜¤</button>

<div id="log"></div>

<script>
  // âœ… åˆå§‹åŒ– EmailJS
  (function() {
    emailjs.init("juXElQrPso7c6tWXE"); // â† é€™è£¡æ›æˆä½ çš„ Public Key
  })();

  const agreeBtn = document.getElementById('agreeBtn');
  const refuseBtn = document.getElementById('refuseBtn');
  const happyImg = document.getElementById('happyImg');
  const angryImg = document.getElementById('angryImg');
  const logDiv = document.getElementById('log');
  let actions = [];
  const defaultSize = parseInt(window.getComputedStyle(agreeBtn).fontSize);

  function showImage(imgToShow) {
    [happyImg, angryImg].forEach(img => {
      img.classList.remove("show");
      img.style.display = "none";
    });
    imgToShow.style.display = "block";
    setTimeout(() => imgToShow.classList.add("show"), 50);
  }

  refuseBtn.addEventListener('click', () => {
    showImage(angryImg);
    actions.push("ä½ é»äº†ä¸å’Œå¥½ ğŸ˜¤");
    updateLog();
    let size = parseInt(window.getComputedStyle(agreeBtn).fontSize);
    agreeBtn.style.fontSize = (size + 10) + "px";
    agreeBtn.classList.add("shake");
    setTimeout(() => agreeBtn.classList.remove("shake"), 400);
  });

  agreeBtn.addEventListener('click', () => {
    showImage(happyImg);
    actions.push("ä½ é»äº†å’Œå¥½ ğŸ’•");
    updateLog();
    agreeBtn.classList.add("pulse");
    setTimeout(() => {
      agreeBtn.classList.remove("pulse");
      agreeBtn.style.fontSize = defaultSize + "px";
    }, 600);

    // âœ… å¯„ä¿¡åˆ°ä½ çš„ä¿¡ç®±
    const templateParams = {
      subject: "ä½ é»äº†å’Œå¥½ ğŸ’•",
      message: actions.join("\n"),
    };

    emailjs.send("service_8vnnk73", "template_prz1cl9", templateParams)
      .then(() => {
        console.log("ğŸ“© å·²å¯„å‡ºåˆ°ä½ çš„ä¿¡ç®±ï¼");
      })
      .catch((error) => {
        console.error("âŒ å¯„ä¿¡å¤±æ•—ï¼š", error);
      });
  });

  function updateLog() {
    logDiv.innerHTML = "<b>ä½ æŒ‰éçš„æŒ‰éˆ•ï¼š</b><br>" + actions.join("<br>");
  }
</script>

</body>
</html>
